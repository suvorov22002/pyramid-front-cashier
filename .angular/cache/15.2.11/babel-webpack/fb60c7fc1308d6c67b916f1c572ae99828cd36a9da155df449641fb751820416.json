{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Directive, Input, HostListener, NgModule } from '@angular/core';\nlet NgxPrintDirective = /*#__PURE__*/(() => {\n  class NgxPrintDirective {\n    constructor() {\n      this._printStyle = [];\n      /**\r\n       * Prevents the print dialog from opening on the window\r\n       *\r\n       * @memberof NgxPrintDirective\r\n       */\n      this.previewOnly = false;\n      /**\r\n       *\r\n       *\r\n       * @memberof NgxPrintDirective\r\n       */\n      this.useExistingCss = false;\n      /**\r\n       * A delay in milliseconds to force the print dialog to wait before opened. Default: 0\r\n       *\r\n       * @memberof NgxPrintDirective\r\n       */\n      this.printDelay = 0;\n      /**\r\n       *\r\n       *\r\n       * @returns html for the given tag\r\n       *\r\n       * @memberof NgxPrintDirective\r\n       */\n      this._styleSheetFile = '';\n    }\n    /**\r\n     *\r\n     *\r\n     * @memberof NgxPrintDirective\r\n     */\n    set printStyle(values) {\n      for (let key in values) {\n        if (values.hasOwnProperty(key)) {\n          this._printStyle.push((key + JSON.stringify(values[key])).replace(/['\"]+/g, ''));\n        }\n      }\n      this.returnStyleValues();\n    }\n    /**\r\n     *\r\n     *\r\n     * @returns the string that create the stylesheet which will be injected\r\n     * later within <style></style> tag.\r\n     *\r\n     * -join/replace to transform an array objects to css-styled string\r\n     *\r\n     * @memberof NgxPrintDirective\r\n     */\n    returnStyleValues() {\n      return `<style> ${this._printStyle.join(' ').replace(/,/g, ';')} </style>`;\n    }\n    /**\r\n     * @memberof NgxPrintDirective\r\n     * @param cssList\r\n     */\n    set styleSheetFile(cssList) {\n      let linkTagFn = function (cssFileName) {\n        return `<link rel=\"stylesheet\" type=\"text/css\" href=\"${cssFileName}\">`;\n      };\n      if (cssList.indexOf(',') !== -1) {\n        const valueArr = cssList.split(',');\n        for (let val of valueArr) {\n          this._styleSheetFile = this._styleSheetFile + linkTagFn(val);\n        }\n      } else {\n        this._styleSheetFile = linkTagFn(cssList);\n      }\n    }\n    /**\r\n     * @returns string which contains the link tags containing the css which will\r\n     * be injected later within <head></head> tag.\r\n     *\r\n     */\n    returnStyleSheetLinkTags() {\n      return this._styleSheetFile;\n    }\n    getElementTag(tag) {\n      const html = [];\n      const elements = document.getElementsByTagName(tag);\n      for (let index = 0; index < elements.length; index++) {\n        html.push(elements[index].outerHTML);\n      }\n      return html.join('\\r\\n');\n    }\n    /**\r\n     *\r\n     * @param data the html element collection to save defaults to\r\n     *\r\n     */\n    getFormData(data) {\n      for (var i = 0; i < data.length; i++) {\n        data[i].defaultValue = data[i].value;\n        if (data[i].checked) {\n          data[i].defaultChecked = true;\n        }\n      }\n    }\n    /**\r\n     * @returns html section to be printed along with some associated inputs\r\n     *\r\n     */\n    getHtmlContents() {\n      let printContents = document.getElementById(this.printSectionId);\n      let innards = printContents.getElementsByTagName('input');\n      this.getFormData(innards);\n      let txt = printContents.getElementsByTagName('textarea');\n      this.getFormData(txt);\n      return printContents.innerHTML;\n    }\n    /**\r\n     *\r\n     *\r\n     * @memberof NgxPrintDirective\r\n     */\n    print() {\n      let printContents,\n        popupWin,\n        styles = '',\n        links = '';\n      const baseTag = this.getElementTag('base');\n      if (this.useExistingCss) {\n        styles = this.getElementTag('style');\n        links = this.getElementTag('link');\n      }\n      printContents = this.getHtmlContents();\n      popupWin = window.open(\"\", \"_blank\", \"top=0,left=0,height=auto,width=auto\");\n      popupWin.document.open();\n      popupWin.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle ? this.printTitle : \"\"}</title>\n          ${baseTag}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${styles}\n          ${links}\n        </head>\n        <body>\n          ${printContents}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly ? '' : `setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          </script>\n        </body>\n      </html>`);\n      popupWin.document.close();\n    }\n  }\n  NgxPrintDirective.ɵfac = function NgxPrintDirective_Factory(t) {\n    return new (t || NgxPrintDirective)();\n  };\n  NgxPrintDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: NgxPrintDirective,\n    selectors: [[\"button\", \"ngxPrint\", \"\"]],\n    hostBindings: function NgxPrintDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function NgxPrintDirective_click_HostBindingHandler() {\n          return ctx.print();\n        });\n      }\n    },\n    inputs: {\n      previewOnly: \"previewOnly\",\n      printSectionId: \"printSectionId\",\n      printTitle: \"printTitle\",\n      useExistingCss: \"useExistingCss\",\n      printDelay: \"printDelay\",\n      printStyle: \"printStyle\",\n      styleSheetFile: \"styleSheetFile\"\n    }\n  });\n  return NgxPrintDirective;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet NgxPrintModule = /*#__PURE__*/(() => {\n  class NgxPrintModule {}\n  NgxPrintModule.ɵfac = function NgxPrintModule_Factory(t) {\n    return new (t || NgxPrintModule)();\n  };\n  NgxPrintModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: NgxPrintModule\n  });\n  NgxPrintModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n  return NgxPrintModule;\n})();\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/*\r\n * Public API Surface of ngx-print\r\n */\n\n/**\r\n * Generated bundle index. Do not edit.\r\n */\n\nexport { NgxPrintDirective, NgxPrintModule };\n//# sourceMappingURL=ngx-print.mjs.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}